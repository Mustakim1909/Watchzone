<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Watchzone.Views.OrderConfirmedPage"
             Title="OrderConfirmedPage">
    <ScrollView>
        <VerticalStackLayout Padding="15" Spacing="20">

            <!-- Header Section -->
            <Frame Padding="20" CornerRadius="12" HasShadow="True" BackgroundColor="#FF9900">
                <VerticalStackLayout Spacing="10" HorizontalOptions="Center">
                    <Label Text="Thank you for your order!" 
                           FontSize="24" 
                           FontAttributes="Bold" 
                           TextColor="White" 
                           HorizontalOptions="Center"/>
                    <Label Text="Your order has been placed successfully" 
                           FontSize="16" 
                           TextColor="White" 
                           HorizontalOptions="Center"/>
                    <Label Text="{Binding OrderId, StringFormat='Order ID: #{0}'}"
       FontSize="14" TextColor="White" HorizontalOptions="Center"/>

                </VerticalStackLayout>
            </Frame>

            <!-- Order Summary -->
            <Frame Padding="15" CornerRadius="12" HasShadow="True" BackgroundColor="White">
                <VerticalStackLayout Spacing="12">
                    <Label Text="ðŸ›’ Order Summary" FontSize="18" FontAttributes="Bold" TextColor="#222"/>
                    <BoxView HeightRequest="1" Color="#E5E5E5"/>

                    <CollectionView ItemsSource="{Binding CartItems}">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Grid ColumnDefinitions="60,*,Auto" Padding="0,8" RowSpacing="5">
                                    <Image Grid.Column="0" Source="{Binding Product.Images[0].Src}"
                                           Aspect="AspectFill" HeightRequest="50" WidthRequest="50"
                                           BackgroundColor="#FAFAFA" Margin="0,0,10,0"/>

                                    <VerticalStackLayout Grid.Column="1" Spacing="2">
                                        <Label Text="{Binding Product.Name}" FontSize="14" MaxLines="1"
                                               LineBreakMode="TailTruncation" TextColor="#333"/>
                                        <Label Text="{Binding Quantity, StringFormat='Qty: {0}'}" FontSize="12" TextColor="#666"/>
                                    </VerticalStackLayout>

                                    <Label Grid.Column="2" Text="{Binding TotalPrice, StringFormat='â‚¹{0:F2}'}"
                                           FontSize="14" FontAttributes="Bold" TextColor="#000"/>
                                </Grid>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>

                    <BoxView HeightRequest="1" Color="#E5E5E5"/>

                    <!-- Price Breakdown -->
                    <VerticalStackLayout Spacing="12" Padding="5,0">
                        <!-- Subtotal -->
                        <Grid ColumnDefinitions="*,Auto">
                            <Label Text="Subtotal" FontSize="14" TextColor="#666" Grid.Column="0"/>
                            <Label Text="{Binding Subtotal, StringFormat='â‚¹{0:F2}'}" 
                                   FontSize="14" TextColor="#111" Grid.Column="1"/>
                        </Grid>

                        <!-- Shipping -->
                        <Grid ColumnDefinitions="*,Auto">
                            <Label Text="Shipping" FontSize="14" TextColor="#666" Grid.Column="0"/>
                            <Label Text="{Binding ShippingCost, StringFormat='â‚¹{0:F2}'}" 
                                   FontSize="14" TextColor="#111" Grid.Column="1"/>
                        </Grid>

                        <!-- Tax -->
                        <Grid ColumnDefinitions="*,Auto">
                            <Label Text="Tax" FontSize="14" TextColor="#666" Grid.Column="0"/>
                            <Label Text="{Binding TaxAmount, StringFormat='â‚¹{0:F2}'}" 
                                   FontSize="14" TextColor="#111" Grid.Column="1"/>
                        </Grid>

                        <!-- Discount -->
                        <Grid ColumnDefinitions="*,Auto" IsVisible="{Binding IsCouponApplied}">
                            <Label Text="Discount" FontSize="14" TextColor="#666" Grid.Column="0"/>
                            <Label Text="{Binding DiscountAmount, StringFormat='-â‚¹{0:F2}'}"
                                   FontSize="14" FontAttributes="Bold" TextColor="Green" Grid.Column="1"/>
                        </Grid>

                        <!-- Divider -->
                        <BoxView HeightRequest="1" Color="#E5E5E5" Margin="0,5"/>

                        <!-- Total -->
                        <Grid ColumnDefinitions="*,Auto">
                            <Label Text="Total" FontSize="16" FontAttributes="Bold" Grid.Column="0"/>
                            <Label Text="{Binding Total, StringFormat='â‚¹{0:F2}'}"
                                   FontSize="18" FontAttributes="Bold"
                                   TextColor="#FF9900" Grid.Column="1"/>
                        </Grid>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- Delivery Information -->
            <Frame Padding="15" CornerRadius="12" HasShadow="True" BackgroundColor="White">
                <VerticalStackLayout Spacing="12">
                    <Label Text="ðŸ“¦ Delivery Information" FontSize="18" FontAttributes="Bold" TextColor="#222"/>
                    <BoxView HeightRequest="1" Color="#E5E5E5"/>

                    <Label Text="{Binding ShippingAddress.FirstName, StringFormat='Name: {0} {1}'}" 
                           FontSize="14" TextColor="#333"/>
                    <Label Text="{Binding ShippingAddress.Address1, StringFormat='Address: {0}'}" 
                           FontSize="14" TextColor="#333"/>
                    <Label Text="{Binding ShippingAddress.City, StringFormat='City: {0}'}" 
                           FontSize="14" TextColor="#333"/>
                    <Label Text="{Binding ShippingAddress.State, StringFormat='State: {0}'}" 
                           FontSize="14" TextColor="#333"/>
                    <Label Text="{Binding ShippingAddress.Postcode, StringFormat='Postal Code: {0}'}" 
                           FontSize="14" TextColor="#333"/>
                    <Label Text="{Binding ShippingAddress.Phone, StringFormat='Phone: {0}'}" 
                           FontSize="14" TextColor="#333"/>

                    <BoxView HeightRequest="1" Color="#E5E5E5" Margin="0,5"/>

                    <Label Text="Estimated Delivery Date:" 
                           FontSize="14" FontAttributes="Bold" TextColor="#333"/>
                    <Label Text="{Binding EstimatedDeliveryDate, StringFormat='{0:dd MMMM yyyy}'}" 
                           FontSize="14" TextColor="#FF9900" FontAttributes="Bold"/>
                </VerticalStackLayout>
            </Frame>

            <!-- Payment Information -->
            <Frame Padding="15" CornerRadius="12" HasShadow="True" BackgroundColor="White">
                <VerticalStackLayout Spacing="12">
                    <Label Text="ðŸ’³ Payment Information" FontSize="18" FontAttributes="Bold" TextColor="#222"/>
                    <BoxView HeightRequest="1" Color="#E5E5E5"/>

                    <Label Text="Payment Method: Cash on Delivery" 
                           FontSize="14" TextColor="#333"/>
                    <Label Text="Payment Status: To be paid on delivery" 
                           FontSize="14" TextColor="#333"/>
                </VerticalStackLayout>
            </Frame>

            <!-- Action Buttons -->
            <Grid ColumnDefinitions="*,*" ColumnSpacing="15">
                <Button Grid.Column="0" Text="Continue Shopping" 
                        Clicked="OnContinueShoppingClicked"
                        BackgroundColor="White"
                        TextColor="#FF9900"
                        BorderColor="#FF9900"
                        BorderWidth="1"
                        CornerRadius="8"
                        FontAttributes="Bold"/>

                <Button Grid.Column="1" Text="View Order Details" 
                        Clicked="OnViewOrderDetailsClicked"
                        BackgroundColor="#FF9900"
                        TextColor="White"
                        CornerRadius="8"
                        FontAttributes="Bold"/>
            </Grid>

            <!-- Support Information -->
            <Frame Padding="15" CornerRadius="12" HasShadow="True" BackgroundColor="White">
                <VerticalStackLayout Spacing="8">
                    <Label Text="Need Help?" FontSize="16" FontAttributes="Bold" TextColor="#222" HorizontalOptions="Center"/>
                    <Label Text="Contact our customer support team" FontSize="14" TextColor="#666" HorizontalOptions="Center"/>
                    <Label Text="Email: support@watchzone.com" FontSize="14" TextColor="#666" HorizontalOptions="Center"/>
                    <Label Text="Phone: 1800-123-4567" FontSize="14" TextColor="#666" HorizontalOptions="Center"/>
                </VerticalStackLayout>
            </Frame>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>